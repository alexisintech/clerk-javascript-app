<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JavaScript App</title>
  <link href="src/style.css" rel="stylesheet" />
</head>
<body>
  <h1>JavaScript Test App</h1>

    <div id="auth-links">
      <button onclick="Clerk.openSignUp()">Sign Up</button>
      <button onclick="Clerk.openSignIn()">Sign In</button>
    </div>

    <div id="create-org-button"></div>

    <div id="user-button"></div>

    <div id="no-frontend-api-warning" hidden>
      <h3>No Frontend API found</h3>
      <h4>Add it to the top of <code>src/index.js</code>.</h4>
    </div>

    <!-- <script src="src/index.js" async crossorigin="anonymous"></script> -->

    <script>
      // Get this URL and Publishable Key from the Clerk Dashboard
      const clerkPublishableKey = `pk_test_ZGlzdGluY3QtbW9zcXVpdG8tMTQuY2xlcmsuYWNjb3VudHMuZGV2JA`;
      const frontendApi = 'https://distinct-mosquito-14.clerk.accounts.dev';
      const version = '@latest'; // Set to appropriate version
    
      // Creates asynchronous script
      const script = document.createElement('script');
      script.setAttribute('data-clerk-frontend-api', frontendApi);
      script.setAttribute('data-clerk-publishable-key', clerkPublishableKey);
      script.async = true;
      script.src = `${frontendApi}/npm/@clerk/clerk-js${version}/dist/clerk.browser.js`;
    
      // Adds listener to initialize ClerkJS after it's loaded
      script.addEventListener('load', async function () {
        await window.Clerk.load();

        // before v5
        console.log(await window.Clerk.user.getOrganizationMemberships());
  
        // after v5
        const { data } = await window.Clerk.user.getOrganizationMemberships();

        console.log(data);
  
        /* data is an array that contains an OrganizationMembershipResource, which would look something like this:
        [
          {
            id: "orgmem_123",
            organization: { ...Organization }, // Organization object
            permissions: [ "org:sys_memberships:read", "org:sys_memberships:manage", "org:sys_domains:read" ],
            publicMetadata: {},
            publicUserData: { firstName: "John", lastName: "Doe", imageUrl: "https://image-url.com", hasImage: true, identifier: "johndoe@email.com", userId: "user_123" },
            role: "admin",
            createdAt: "2021-09-28T14:00:00.000Z",
            updatedAt: "2021-09-28T14:00:00.000Z",
            destroy: () => { ... },
            update: (updateParams) => { ... },
          }
        ]
        */
      });
      document.body.appendChild(script);
    </script>
</body>
</html>